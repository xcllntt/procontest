[build]
  # Allow Netlify to update the lockfile if it changes; avoids CI failure when
  # package.json has new deps but pnpm-lock.yaml is not yet updated.
  command = "pnpm install --no-frozen-lockfile && pnpm run build"
  publish = ".next"
  functions = ".netlify/functions"

[[plugins]]
  package = "@netlify/next"

[functions]
  node_bundler = "esbuild"
  external_node_modules = [
    "@supabase/supabase-js",
    "@supabase/ssr"
  ]
